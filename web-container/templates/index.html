<!DOCTYPE html>
<html>
<head>
  <title>Dr. Legal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: Arial; max-width: 600px; margin: 40px auto; padding: 20px; }
    #chat { border: 1px solid #ccc; height: 400px; overflow-y: scroll; padding: 10px; margin-bottom: 10px; }
    #input { width: 70%; padding: 10px; }
    #send { padding: 10px; }
  </style>
</head>
<body>
  <h1>ðŸ’¬ Dr. Legal</h1>
  <div id="chat">OlÃ¡! Sou o Dr. Legal. Pergunte algo sobre direitos.</div>
  <input type="text" id="input" placeholder="Digite sua dÃºvida..." />
  <button id="send">Enviar</button>

  <script>
    const chat = document.getElementById("chat");
    const input = document.getElementById("input");
    const send = document.getElementById("send");

    send.onclick = () => enviar();
    input.onkeypress = (e) => e.key === "Enter" && enviar();

    function enviar() {
      const msg = input.value.trim();
      if (!msg) return;

      chat.innerHTML += `<p><b>VocÃª:</b> ${msg}</p>`;
      fetch("/chat", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ pergunta: msg })
      })
      .then(r => r.json())
      .then(d => {
        chat.innerHTML += `<p><b>Dr. Legal:</b> ${d.resposta}</p>`;
        chat.scrollTop = chat.scrollHeight;
      });

      input.value = "";
    }
  </script>
</body>
</html>